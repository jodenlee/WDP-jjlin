{% extends 'base.html' %}

{% block content %}
<!-- Minimalist Welcome Banner -->
<div class="welcome-banner-minimal mb-5">
    <h1 class="display-5 fw-bold" style="color: var(--primary-color);"><span>Hello</span>, {{
        user.full_name }}</h1>
    <p class="fs-5 text-muted">What would you like to do today?</p>
</div>

<!-- Main Feature Navigation Grid -->
<div class="row justify-content-center g-4 mb-5">

    <!-- Stories -->
    <div class="col-6 col-md-4 col-lg-2">
        <a href="{{ url_for('stories') }}" class="text-decoration-none text-dark">
            <div class="card nav-card-minimal h-100 text-center p-3">
                <div class="card-body">
                    <div class="nav-card-icon">
                        <i class="fas fa-book fa-2x"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Stories</h6>
                    <span class="small text-muted">Read & Share</span>
                </div>
            </div>
        </a>
    </div>

    <!-- Community -->
    <div class="col-6 col-md-4 col-lg-2">
        <a href="{{ url_for('community') }}" class="text-decoration-none text-dark">
            <div class="card nav-card-minimal h-100 text-center p-3">
                <div class="card-body">
                    <div class="nav-card-icon">
                        <i class="fas fa-users fa-2x"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Community</h6>
                    <span class="small text-muted">Find your group</span>
                </div>
            </div>
        </a>
    </div>

    <!-- Activities -->
    <div class="col-6 col-md-4 col-lg-2">
        <a href="{{ url_for('activities') }}" class="text-decoration-none text-dark">
            <div class="card nav-card-minimal h-100 text-center p-3">
                <div class="card-body">
                    <div class="nav-card-icon">
                        <i class="fas fa-calendar-alt fa-2x"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Activities</h6>
                    <span class="small text-muted">Events & Workshops</span>
                </div>
            </div>
        </a>
    </div>

    <!-- Messages -->
    <div class="col-6 col-md-4 col-lg-2">
        <a href="{{ url_for('messages') }}" class="text-decoration-none text-dark">
            <div class="card nav-card-minimal h-100 text-center p-3">
                <div class="card-body">
                    <div class="nav-card-icon">
                        <i class="fas fa-comments fa-2x"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Messages</h6>
                    <span class="small text-muted">Chat with friends</span>
                </div>
            </div>
        </a>
    </div>

    <!-- Profile -->
    <div class="col-6 col-md-4 col-lg-2">
        <a href="{{ url_for('profile') }}" class="text-decoration-none text-dark">
            <div class="card nav-card-minimal h-100 text-center p-3">
                <div class="card-body">
                    <div class="nav-card-icon">
                        <i class="fas fa-user-circle fa-2x"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Profile</h6>
                    <span class="small text-muted">Manage account</span>
                </div>
            </div>
        </a>
    </div>
</div>

<!-- Recent Content Preview -->
<div class="row g-4 pt-4 border-top border-light">
    <!-- Recent Stories -->
    <div class="col-12 col-md-6">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-bold text-muted"><i class="fas fa-book me-2"></i><span>Recent
                    Stories</span></h5>
            <a href="{{ url_for('stories') }}" class="btn btn-sm btn-link text-muted">View all</a>
        </div>

        <div class="list-group list-group-flush">
            {% if recent_stories %}
            {% for story in recent_stories %}
            <a href="{{ url_for('view_story', story_id=story['id']) }}"
                class="list-group-item list-group-item-action bg-transparent border-0 px-0 py-2">
                <div class="d-flex w-100 justify-content-between">
                    <span class="fw-bold text-dark">{{ story['title'] }}</span>
                    <small class="text-muted">{{ story['created_at'] }}</small>
                </div>
                <small class="text-muted d-block text-truncate">{{ story['content'] }}</small>
            </a>
            {% endfor %}
            {% else %}
            <div class="text-muted small">No stories yet.</div>
            {% endif %}
        </div>
    </div>

    <!-- Upcoming Activities -->
    <div class="col-12 col-md-6">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-bold text-muted"><i class="fas fa-calendar-check me-2"></i><span
                   >Upcoming</span></h5>
            <a href="{{ url_for('activities') }}" class="btn btn-sm btn-link text-muted">View
                all</a>
        </div>

        <div class="list-group list-group-flush">
            {% if upcoming_activities %}
            {% for activity in upcoming_activities %}
            <div class="list-group-item bg-transparent border-0 px-0 py-2">
                <div class="d-flex w-100 justify-content-between align-items-center">
                    <span class="fw-bold text-dark">{{ activity['title'] }}</span>
                    <span class="badge bg-secondary rounded-pill" style="opacity: 0.7;">Event</span>
                </div>
                <small class="text-muted d-block"><i class="fas fa-map-marker-alt me-1"></i> {{ activity['location'] or
                    'Online' }}</small>
            </div>
            {% endfor %}
            {% else %}
            <div class="text-muted small">No upcoming activities.</div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}